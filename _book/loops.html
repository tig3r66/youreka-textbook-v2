<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Loops | A Gentle Introduction to Data Science with R</title>
  <meta name="description" content="4 Loops | A Gentle Introduction to Data Science with R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Loops | A Gentle Introduction to Data Science with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="assets/youreka-logo.png" />
  
  <meta name="github-repo" content="tig3r66/youreka-textbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Loops | A Gentle Introduction to Data Science with R" />
  
  
  <meta name="twitter:image" content="assets/youreka-logo.png" />

<meta name="author" content="Eddie Guo" />
<meta name="author" content="Youreka Canada Programs Team" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-structures.html"/>
<link rel="next" href="more-data-frames.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/4.3.1/iframeResizer.min.js">
</script>

<script type="text/javascript">

// Once page is loaded, override and disable popover "scroll into view"
  $(document).ready(function() {
    window.tutorial.scrollIntoView = function() {}
  })

// Add padding to LearnR body when popover shown
  $(document).on("shown.bs.popover", function() {
    var popoverHeight = document.querySelector(".popover").offsetHeight
    document.body.style.paddingTop = popoverHeight + 10 + "px"
  })

// Set padding to 0 when popover hidden
  $(document).on("hide.bs.popover", function() {
    var popoverHeight = document.querySelector(".popover").offsetHeight
    document.body.style.paddingTop = "0px"
  })
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="assets/youreka-logo.png" ></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to Youreka Canada</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-use-this-textbook"><i class="fa fa-check"></i>How to use this textbook</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#credit"><i class="fa fa-check"></i>Credit</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="part"><span><b>I Prerequisites</b></span></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Install R and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#installing-r"><i class="fa fa-check"></i><b>1.1</b> Installing R</a></li>
<li class="chapter" data-level="1.2" data-path="install.html"><a href="install.html#installing-rstudio"><i class="fa fa-check"></i><b>1.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="install.html"><a href="install.html#add-on-packages"><i class="fa fa-check"></i><b>1.3</b> Add-on packages</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i><b>2</b> Intro to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro-to-r.html"><a href="intro-to-r.html#objects"><i class="fa fa-check"></i><b>2.1</b> Objects</a></li>
<li class="chapter" data-level="2.2" data-path="intro-to-r.html"><a href="intro-to-r.html#functions"><i class="fa fa-check"></i><b>2.2</b> Functions</a></li>
<li class="chapter" data-level="2.3" data-path="intro-to-r.html"><a href="intro-to-r.html#math-operators"><i class="fa fa-check"></i><b>2.3</b> Math operators</a></li>
<li class="chapter" data-level="2.4" data-path="intro-to-r.html"><a href="intro-to-r.html#conditionals"><i class="fa fa-check"></i><b>2.4</b> Conditionals</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro-to-r.html"><a href="intro-to-r.html#if-statements"><i class="fa fa-check"></i><b>2.4.1</b> If statements</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro-to-r.html"><a href="intro-to-r.html#working-directory"><i class="fa fa-check"></i><b>2.5</b> Working directory</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="intro-to-r.html"><a href="intro-to-r.html#other-important-things"><i class="fa fa-check"></i><b>2.5.1</b> Other important things</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>3</b> Data Structures</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>3.1</b> Vectors</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-structures.html"><a href="data-structures.html#missing-values"><i class="fa fa-check"></i><b>3.1.1</b> Missing values</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>3.2</b> Lists</a></li>
<li class="chapter" data-level="3.3" data-path="data-structures.html"><a href="data-structures.html#data-frames"><i class="fa fa-check"></i><b>3.3</b> Data frames</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-structures.html"><a href="data-structures.html#external-data"><i class="fa fa-check"></i><b>3.3.1</b> External data</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-structures.html"><a href="data-structures.html#factors"><i class="fa fa-check"></i><b>3.3.2</b> Factors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>4</b> Loops</a>
<ul>
<li class="chapter" data-level="4.1" data-path="loops.html"><a href="loops.html#for-loops"><i class="fa fa-check"></i><b>4.1</b> For loops</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="loops.html"><a href="loops.html#looping-over-multiple-files"><i class="fa fa-check"></i><b>4.1.1</b> Looping over multiple files</a></li>
<li class="chapter" data-level="4.1.2" data-path="loops.html"><a href="loops.html#nested-loops-optional"><i class="fa fa-check"></i><b>4.1.2</b> Nested loops (OPTIONAL)</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="loops.html"><a href="loops.html#functions-1"><i class="fa fa-check"></i><b>4.2</b> Functions</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="loops.html"><a href="loops.html#conditionals-within-functions"><i class="fa fa-check"></i><b>4.2.1</b> Conditionals within functions</a></li>
<li class="chapter" data-level="4.2.2" data-path="loops.html"><a href="loops.html#nested-conditionals"><i class="fa fa-check"></i><b>4.2.2</b> Nested conditionals</a></li>
<li class="chapter" data-level="4.2.3" data-path="loops.html"><a href="loops.html#function-arguments"><i class="fa fa-check"></i><b>4.2.3</b> Function arguments</a></li>
<li class="chapter" data-level="4.2.4" data-path="loops.html"><a href="loops.html#combining-functions"><i class="fa fa-check"></i><b>4.2.4</b> Combining functions</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data Wrangling</b></span></li>
<li class="chapter" data-level="5" data-path="more-data-frames.html"><a href="more-data-frames.html"><i class="fa fa-check"></i><b>5</b> More data frames</a>
<ul>
<li class="chapter" data-level="5.1" data-path="more-data-frames.html"><a href="more-data-frames.html#get-the-gapminder-data"><i class="fa fa-check"></i><b>5.1</b> Get the gapminder data</a></li>
<li class="chapter" data-level="5.2" data-path="more-data-frames.html"><a href="more-data-frames.html#explore-gapminder"><i class="fa fa-check"></i><b>5.2</b> Explore gapminder</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="more-data-frames.html"><a href="more-data-frames.html#importing-and-exporting-data"><i class="fa fa-check"></i><b>5.2.1</b> Importing and exporting data</a></li>
<li class="chapter" data-level="5.2.2" data-path="more-data-frames.html"><a href="more-data-frames.html#exploring-variables-in-a-data-frame"><i class="fa fa-check"></i><b>5.2.2</b> Exploring variables in a data frame</a></li>
<li class="chapter" data-level="5.2.3" data-path="more-data-frames.html"><a href="more-data-frames.html#data-frame-summary"><i class="fa fa-check"></i><b>5.2.3</b> Data frame summary</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="more-data-frames.html"><a href="more-data-frames.html#data-frames-with-dplyr"><i class="fa fa-check"></i><b>5.3</b> Data frames with dplyr</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="more-data-frames.html"><a href="more-data-frames.html#subsetting-data"><i class="fa fa-check"></i><b>5.3.1</b> Subsetting data</a></li>
<li class="chapter" data-level="5.3.2" data-path="more-data-frames.html"><a href="more-data-frames.html#filter-rows-with-filter"><i class="fa fa-check"></i><b>5.3.2</b> Filter rows with <code>filter()</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="more-data-frames.html"><a href="more-data-frames.html#pipe-operator"><i class="fa fa-check"></i><b>5.3.3</b> Pipe operator <code>%&gt;%</code></a></li>
<li class="chapter" data-level="5.3.4" data-path="more-data-frames.html"><a href="more-data-frames.html#select-columns-with-select"><i class="fa fa-check"></i><b>5.3.4</b> Select Columns with <code>select()</code></a></li>
<li class="chapter" data-level="5.3.5" data-path="more-data-frames.html"><a href="more-data-frames.html#pure-predictable-pipeable-optional"><i class="fa fa-check"></i><b>5.3.5</b> Pure, predictable, pipeable (OPTIONAL)</a></li>
<li class="chapter" data-level="5.3.6" data-path="more-data-frames.html"><a href="more-data-frames.html#additional-resources"><i class="fa fa-check"></i><b>5.3.6</b> Additional resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="more-dplyr.html"><a href="more-dplyr.html"><i class="fa fa-check"></i><b>6</b> More dplyr</a>
<ul>
<li class="chapter" data-level="6.1" data-path="more-dplyr.html"><a href="more-dplyr.html#review-and-preparation"><i class="fa fa-check"></i><b>6.1</b> Review and preparation</a></li>
<li class="chapter" data-level="6.2" data-path="more-dplyr.html"><a href="more-dplyr.html#use-mutate-to-add-new-variables"><i class="fa fa-check"></i><b>6.2</b> Use mutate() to add new variables</a></li>
<li class="chapter" data-level="6.3" data-path="more-dplyr.html"><a href="more-dplyr.html#use-arrange-to-row-order-data"><i class="fa fa-check"></i><b>6.3</b> Use arrange() to row-order data</a></li>
<li class="chapter" data-level="6.4" data-path="more-dplyr.html"><a href="more-dplyr.html#use-rename-to-rename-variables"><i class="fa fa-check"></i><b>6.4</b> Use rename() to rename variables</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="more-dplyr.html"><a href="more-dplyr.html#use-select-to-rename-and-reposition-variables"><i class="fa fa-check"></i><b>6.4.1</b> Use select() to rename and reposition variables</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="more-dplyr.html"><a href="more-dplyr.html#perform-tasks-on-subsets-with-group_by"><i class="fa fa-check"></i><b>6.5</b> Perform tasks on subsets with <code>group_by()</code></a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="more-dplyr.html"><a href="more-dplyr.html#counting"><i class="fa fa-check"></i><b>6.5.1</b> Counting</a></li>
<li class="chapter" data-level="6.5.2" data-path="more-dplyr.html"><a href="more-dplyr.html#general-summarization"><i class="fa fa-check"></i><b>6.5.2</b> General summarization</a></li>
<li class="chapter" data-level="6.5.3" data-path="more-dplyr.html"><a href="more-dplyr.html#computing-with-group-wise-summaries"><i class="fa fa-check"></i><b>6.5.3</b> Computing with group-wise summaries</a></li>
<li class="chapter" data-level="6.5.4" data-path="more-dplyr.html"><a href="more-dplyr.html#window-functions-optional"><i class="fa fa-check"></i><b>6.5.4</b> Window functions (OPTIONAL)</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="more-dplyr.html"><a href="more-dplyr.html#introduction-to-visualization-optional"><i class="fa fa-check"></i><b>6.6</b> Introduction to visualization (OPTIONAL)</a></li>
<li class="chapter" data-level="6.7" data-path="more-dplyr.html"><a href="more-dplyr.html#comprehensive-practice"><i class="fa fa-check"></i><b>6.7</b> Comprehensive practice</a></li>
<li class="chapter" data-level="6.8" data-path="more-dplyr.html"><a href="more-dplyr.html#data-wrangling-summary"><i class="fa fa-check"></i><b>6.8</b> Data wrangling summary</a></li>
</ul></li>
<li class="part"><span><b>III Statistics</b></span></li>
<li class="chapter" data-level="7" data-path="central-limit-theorem.html"><a href="central-limit-theorem.html"><i class="fa fa-check"></i><b>7</b> Central limit theorem</a>
<ul>
<li class="chapter" data-level="7.1" data-path="central-limit-theorem.html"><a href="central-limit-theorem.html#clt-for-means"><i class="fa fa-check"></i><b>7.1</b> CLT for means</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="central-limit-theorem.html"><a href="central-limit-theorem.html#clt-part-1"><i class="fa fa-check"></i><b>7.1.1</b> CLT Part 1</a></li>
<li class="chapter" data-level="7.1.2" data-path="central-limit-theorem.html"><a href="central-limit-theorem.html#clt-part-2"><i class="fa fa-check"></i><b>7.1.2</b> CLT Part 2</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="central-limit-theorem.html"><a href="central-limit-theorem.html#clt-for-proportions"><i class="fa fa-check"></i><b>7.2</b> CLT for proportions</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html"><i class="fa fa-check"></i><b>8</b> Basic statistical tests</a>
<ul>
<li class="chapter" data-level="8.1" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#getting-ready"><i class="fa fa-check"></i><b>8.1</b> Getting ready</a></li>
<li class="chapter" data-level="8.2" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#students-t-test"><i class="fa fa-check"></i><b>8.2</b> Student‚Äôs t-test</a></li>
<li class="chapter" data-level="8.3" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#chi-squared-test"><i class="fa fa-check"></i><b>8.3</b> Chi-squared test</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#chi2-test-for-goodness-of-fit"><i class="fa fa-check"></i><b>8.3.1</b> <span class="math inline">\(\chi^2\)</span> test for goodness-of-fit</a></li>
<li class="chapter" data-level="8.3.2" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#chi2-test-for-independence"><i class="fa fa-check"></i><b>8.3.2</b> <span class="math inline">\(\chi^2\)</span> test for independence</a></li>
<li class="chapter" data-level="8.3.3" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#chi2-test-for-homogeneity"><i class="fa fa-check"></i><b>8.3.3</b> <span class="math inline">\(\chi^2\)</span> test for homogeneity</a></li>
<li class="chapter" data-level="8.3.4" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#fishers-exact-test-optional"><i class="fa fa-check"></i><b>8.3.4</b> Fisher‚Äôs exact test (OPTIONAL)</a></li>
<li class="chapter" data-level="8.3.5" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#comparison-of-proportions-optional"><i class="fa fa-check"></i><b>8.3.5</b> Comparison of proportions (OPTIONAL)</a></li>
<li class="chapter" data-level="8.3.6" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#contingency-tables"><i class="fa fa-check"></i><b>8.3.6</b> Contingency tables</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#visualizing-data-distributions-optional"><i class="fa fa-check"></i><b>8.4</b> Visualizing data distributions (OPTIONAL)</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html"><i class="fa fa-check"></i><b>9</b> Comparing multiple means</a>
<ul>
<li class="chapter" data-level="9.1" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#loading-packages"><i class="fa fa-check"></i><b>9.1</b> Loading packages</a></li>
<li class="chapter" data-level="9.2" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#merging-datasets"><i class="fa fa-check"></i><b>9.2</b> Merging datasets</a></li>
<li class="chapter" data-level="9.3" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#one-way-anova"><i class="fa fa-check"></i><b>9.3</b> One-way ANOVA</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#the-iris-dataset"><i class="fa fa-check"></i><b>9.3.1</b> The iris dataset</a></li>
<li class="chapter" data-level="9.3.2" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#non-parametric-alternatives-to-anova"><i class="fa fa-check"></i><b>9.3.2</b> Non-parametric alternatives to ANOVA</a></li>
<li class="chapter" data-level="9.3.3" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#two-way-anova"><i class="fa fa-check"></i><b>9.3.3</b> Two-way ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#linear-regression"><i class="fa fa-check"></i><b>9.4</b> Linear regression</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#basic-concepts"><i class="fa fa-check"></i><b>9.4.1</b> Basic concepts</a></li>
<li class="chapter" data-level="9.4.2" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#pearson-correlation"><i class="fa fa-check"></i><b>9.4.2</b> Pearson correlation</a></li>
<li class="chapter" data-level="9.4.3" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#spearman-correlation"><i class="fa fa-check"></i><b>9.4.3</b> Spearman correlation</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Data Visualization</b></span></li>
<li class="chapter" data-level="10" data-path="data-visualization-basics.html"><a href="data-visualization-basics.html"><i class="fa fa-check"></i><b>10</b> Data visualization basics</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-visualization-basics.html"><a href="data-visualization-basics.html#a-graphing-template"><i class="fa fa-check"></i><b>10.1</b> A graphing template</a></li>
<li class="chapter" data-level="10.2" data-path="data-visualization-basics.html"><a href="data-visualization-basics.html#scatter-plot"><i class="fa fa-check"></i><b>10.2</b> Scatter plot</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="data-visualization-basics.html"><a href="data-visualization-basics.html#trend-lines"><i class="fa fa-check"></i><b>10.2.1</b> Trend lines</a></li>
<li class="chapter" data-level="10.2.2" data-path="data-visualization-basics.html"><a href="data-visualization-basics.html#facets"><i class="fa fa-check"></i><b>10.2.2</b> Facets</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-visualization-basics.html"><a href="data-visualization-basics.html#aesthetic-mappings"><i class="fa fa-check"></i><b>10.3</b> Aesthetic mappings</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="getting-publication-ready.html"><a href="getting-publication-ready.html"><i class="fa fa-check"></i><b>11</b> Getting publication-ready</a>
<ul>
<li class="chapter" data-level="11.1" data-path="getting-publication-ready.html"><a href="getting-publication-ready.html#line-plot"><i class="fa fa-check"></i><b>11.1</b> Line plot</a></li>
<li class="chapter" data-level="11.2" data-path="getting-publication-ready.html"><a href="getting-publication-ready.html#bar-plot"><i class="fa fa-check"></i><b>11.2</b> Bar plot</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="getting-publication-ready.html"><a href="getting-publication-ready.html#basics"><i class="fa fa-check"></i><b>11.2.1</b> Basics</a></li>
<li class="chapter" data-level="11.2.2" data-path="getting-publication-ready.html"><a href="getting-publication-ready.html#plotting-significance-optional"><i class="fa fa-check"></i><b>11.2.2</b> Plotting significance (OPTIONAL)</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="getting-publication-ready.html"><a href="getting-publication-ready.html#box-plot"><i class="fa fa-check"></i><b>11.3</b> Box plot</a></li>
<li class="chapter" data-level="11.4" data-path="getting-publication-ready.html"><a href="getting-publication-ready.html#histogram-and-density-plot"><i class="fa fa-check"></i><b>11.4</b> Histogram and density plot</a></li>
<li class="chapter" data-level="11.5" data-path="getting-publication-ready.html"><a href="getting-publication-ready.html#assembly-of-multiple-figures-optional"><i class="fa fa-check"></i><b>11.5</b> Assembly of multiple figures (OPTIONAL)</a></li>
<li class="chapter" data-level="11.6" data-path="getting-publication-ready.html"><a href="getting-publication-ready.html#extras-optional"><i class="fa fa-check"></i><b>11.6</b> Extras (OPTIONAL)</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="getting-publication-ready.html"><a href="getting-publication-ready.html#choropleth"><i class="fa fa-check"></i><b>11.6.1</b> Choropleth</a></li>
<li class="chapter" data-level="11.6.2" data-path="getting-publication-ready.html"><a href="getting-publication-ready.html#animations"><i class="fa fa-check"></i><b>11.6.2</b> Animations</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="getting-publication-ready.html"><a href="getting-publication-ready.html#additional-resources-1"><i class="fa fa-check"></i><b>11.7</b> Additional resources</a></li>
</ul></li>
<li class="divider"></li>
<li><center>
  <a rel="license" href="./index.html#license">
    License: CC-BY-SA<br>
    <i class = "fab fa-creative-commons fa-2x"></i>
    <i class = "fab fa-creative-commons-by fa-2x"></i>
    <i class = "fab fa-creative-commons-sa fa-2x"></i>
  </a>
</li></center>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Gentle Introduction to Data Science with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="loops" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Loops</h1>
<p>Loops are fundamental a programming concept as they get a lot of repetitive stuff done in very few lines of code. You can think of loops as something that performs the same operation on a lot of things.</p>
<div id="for-loops" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> For loops</h2>
<p>Here‚Äôs what the syntax of a <code>for</code> loop looks like:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="loops.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (item <span class="cf">in</span> list_of_items) {</span>
<span id="cb1-2"><a href="loops.html#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">do_something</span>(item)</span>
<span id="cb1-3"><a href="loops.html#cb1-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>And here is an example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="loops.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb2-2"><a href="loops.html#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb2-3"><a href="loops.html#cb2-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>The above snippet is equivalent to this:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="loops.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="dv">1</span>)</span>
<span id="cb4-2"><a href="loops.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="dv">2</span>)</span>
<span id="cb4-3"><a href="loops.html#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="dv">3</span>)</span>
<span id="cb4-4"><a href="loops.html#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="dv">4</span>)</span>
<span id="cb4-5"><a href="loops.html#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="dv">5</span>)</span></code></pre></div>
<p>You can also have multiple lines of code in the body of a loop.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="loops.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (number <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb5-2"><a href="loops.html#cb5-2" aria-hidden="true" tabindex="-1"></a>   number <span class="ot">&lt;-</span> number<span class="sc">*</span><span class="dv">2</span></span>
<span id="cb5-3"><a href="loops.html#cb5-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">print</span>(number)</span>
<span id="cb5-4"><a href="loops.html#cb5-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 2
## [1] 4
## [1] 6
## [1] 8
## [1] 10</code></pre>
<p>In the previous examples, we used the dummy variables <code>i</code> and <code>number</code> to take on some range of values. Notice that <code>i</code> can be called anything you want.</p>
<p>To contexualize this, let‚Äôs look at an example that calculates mass using the following fomula: <span class="math inline">\(\text{mass} = \text{density} \times \text{volume}\)</span></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="loops.html#cb7-1" aria-hidden="true" tabindex="-1"></a>density <span class="ot">&lt;-</span> <span class="fl">2.65</span></span>
<span id="cb7-2"><a href="loops.html#cb7-2" aria-hidden="true" tabindex="-1"></a>volumes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.6</span>, <span class="dv">3</span>, <span class="dv">8</span>)</span>
<span id="cb7-3"><a href="loops.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(volumes)) {</span>
<span id="cb7-4"><a href="loops.html#cb7-4" aria-hidden="true" tabindex="-1"></a>mass <span class="ot">&lt;-</span> density <span class="sc">*</span> volumes[i]</span>
<span id="cb7-5"><a href="loops.html#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mass)</span>
<span id="cb7-6"><a href="loops.html#cb7-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 4.24
## [1] 7.95
## [1] 21.2</code></pre>
<p>Looping with an index allows us to store results calculated in the loop. In the following snippet, we are going to create an empty vector with sthe length of our <code>volumes</code> vector.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="loops.html#cb9-1" aria-hidden="true" tabindex="-1"></a>( masses <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;numeric&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(volumes)) )</span></code></pre></div>
<pre><code>## [1] 0 0 0</code></pre>
<p>Note that <code>"numeric"</code> is the type of data we are going to store and <code>length(volumes)</code> is the desired length of our vector.</p>
<p>Now, add each result in the correct position‚Äîfor each <strong>iteration</strong> through the loop, save the output in the empty vector (<code>masses</code>) at the i‚Äôth position.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="loops.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(volumes)){</span>
<span id="cb11-2"><a href="loops.html#cb11-2" aria-hidden="true" tabindex="-1"></a>   mass <span class="ot">&lt;-</span> <span class="fl">2.65</span> <span class="sc">*</span> volumes[i]</span>
<span id="cb11-3"><a href="loops.html#cb11-3" aria-hidden="true" tabindex="-1"></a>   masses[i] <span class="ot">&lt;-</span> mass</span>
<span id="cb11-4"><a href="loops.html#cb11-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-5"><a href="loops.html#cb11-5" aria-hidden="true" tabindex="-1"></a>masses</span></code></pre></div>
<pre><code>## [1]  4.24  7.95 21.20</code></pre>
<div id="looping-over-multiple-files" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Looping over multiple files</h3>
<p>We turn our attention now to a (slightly more) useful example: how do we analyze multiple files with similar contents?</p>
<p>In this hypothetical example, we have 5 datasets with satellite coodinates at specific points orbiting the Earth. Suppose the files are similarly named (click on the files to download them):</p>
<ul>
<li><a href="./data/02_intro-to-r/locations-2016-01-01.txt">locations-2016-01-01.txt</a></li>
<li><a href="./data/02_intro-to-r/locations-2016-01-02.txt">locations-2016-01-02.txt</a></li>
<li><a href="./data/02_intro-to-r/locations-2016-01-03.txt">locations-2016-01-03.txt</a></li>
<li><a href="./data/02_intro-to-r/locations-2016-01-04.txt">locations-2016-01-04.txt</a></li>
<li><a href="./data/02_intro-to-r/locations-2016-01-05.txt">locations-2016-01-05.txt</a></li>
</ul>
<p>Our goal is to determine the number of satellite coordinates per file.</p>
<p>First, retrieve the name of each file.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="loops.html#cb13-1" aria-hidden="true" tabindex="-1"></a>data_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">&quot;data/02_intro-to-r/&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;locations-.*.txt&quot;</span>, </span>
<span id="cb13-2"><a href="loops.html#cb13-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Note that the asterisk in <code>"*.txt"</code> refers to ‚Äúany name in this directory‚Äù whereas the <code>".txt"</code> part ensures we are only selecting .txt files.</p>
<p>Next, determine the number of observations in each file. We will assume that each row corresponds to a single coordinate.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="loops.html#cb14-1" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;integer&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(data_files))</span>
<span id="cb14-2"><a href="loops.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(data_files)) {</span>
<span id="cb14-3"><a href="loops.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(data_files[i])</span>
<span id="cb14-4"><a href="loops.html#cb14-4" aria-hidden="true" tabindex="-1"></a>  count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(data)</span>
<span id="cb14-5"><a href="loops.html#cb14-5" aria-hidden="true" tabindex="-1"></a>  results[i] <span class="ot">&lt;-</span> count</span>
<span id="cb14-6"><a href="loops.html#cb14-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now, store the output in a data frame and associate the file name with the count.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="loops.html#cb15-1" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">file_name =</span> <span class="fu">character</span>(<span class="fu">length</span>(data_files)),</span>
<span id="cb15-2"><a href="loops.html#cb15-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">count =</span> <span class="fu">integer</span>(<span class="fu">length</span>(data_files)),</span>
<span id="cb15-3"><a href="loops.html#cb15-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb15-4"><a href="loops.html#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="loops.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(data_files)){</span>
<span id="cb15-6"><a href="loops.html#cb15-6" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(data_files[i])</span>
<span id="cb15-7"><a href="loops.html#cb15-7" aria-hidden="true" tabindex="-1"></a>  count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(data)</span>
<span id="cb15-8"><a href="loops.html#cb15-8" aria-hidden="true" tabindex="-1"></a>  results<span class="sc">$</span>file_name[i] <span class="ot">&lt;-</span> data_files[i]</span>
<span id="cb15-9"><a href="loops.html#cb15-9" aria-hidden="true" tabindex="-1"></a>  results<span class="sc">$</span>count[i] <span class="ot">&lt;-</span> count</span>
<span id="cb15-10"><a href="loops.html#cb15-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-11"><a href="loops.html#cb15-11" aria-hidden="true" tabindex="-1"></a>results</span></code></pre></div>
<pre><code>##                                      file_name count
## 1 data/02_intro-to-r//locations-2016-01-01.txt     4
## 2 data/02_intro-to-r//locations-2016-01-02.txt     8
## 3 data/02_intro-to-r//locations-2016-01-03.txt    10
## 4 data/02_intro-to-r//locations-2016-01-04.txt    10
## 5 data/02_intro-to-r//locations-2016-01-05.txt    12</code></pre>
<p>Voila! With the knowledge in this chapter, you are ready to solve some real-world problems üòÑ</p>
</div>
<div id="nested-loops-optional" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Nested loops (OPTIONAL)</h3>
<p>Sometimes, we need to loop over more than a single range of numbers. For example, what if we want to select all pixels on a 3x4 rectangular screen? Here, we need to cover both the ‚Äúx‚Äù and ‚Äúy‚Äù pixel coodinates:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="loops.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) {</span>
<span id="cb17-2"><a href="loops.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb17-3"><a href="loops.html#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;i = &quot;</span> , i, <span class="st">&quot;; j = &quot;</span>, j))</span>
<span id="cb17-4"><a href="loops.html#cb17-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb17-5"><a href="loops.html#cb17-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;i =  1 ; j =  1&quot;
## [1] &quot;i =  1 ; j =  2&quot;
## [1] &quot;i =  1 ; j =  3&quot;
## [1] &quot;i =  1 ; j =  4&quot;
## [1] &quot;i =  2 ; j =  1&quot;
## [1] &quot;i =  2 ; j =  2&quot;
## [1] &quot;i =  2 ; j =  3&quot;
## [1] &quot;i =  2 ; j =  4&quot;
## [1] &quot;i =  3 ; j =  1&quot;
## [1] &quot;i =  3 ; j =  2&quot;
## [1] &quot;i =  3 ; j =  3&quot;
## [1] &quot;i =  3 ; j =  4&quot;</code></pre>
<p>Here‚Äôs a slightly more complex example that finds all prime numbers from 1 to 15:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="loops.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">15</span>) {</span>
<span id="cb19-2"><a href="loops.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># assume each number is prime by default</span></span>
<span id="cb19-3"><a href="loops.html#cb19-3" aria-hidden="true" tabindex="-1"></a>prime <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb19-4"><a href="loops.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>(i<span class="dv">-1</span>)) {</span>
<span id="cb19-5"><a href="loops.html#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if i is divisible by any number from 2 to i-1, it is not a prime</span></span>
<span id="cb19-6"><a href="loops.html#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (i<span class="sc">%%</span>j <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb19-7"><a href="loops.html#cb19-7" aria-hidden="true" tabindex="-1"></a>    prime <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb19-8"><a href="loops.html#cb19-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb19-9"><a href="loops.html#cb19-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-10"><a href="loops.html#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (prime <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">|</span> i <span class="sc">==</span> <span class="dv">2</span>) {</span>
<span id="cb19-11"><a href="loops.html#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(i, <span class="st">&quot;is prime&quot;</span>))</span>
<span id="cb19-12"><a href="loops.html#cb19-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-13"><a href="loops.html#cb19-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;2 is prime&quot;
## [1] &quot;3 is prime&quot;
## [1] &quot;5 is prime&quot;
## [1] &quot;7 is prime&quot;
## [1] &quot;11 is prime&quot;
## [1] &quot;13 is prime&quot;</code></pre>
</div>
</div>
<div id="functions-1" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Functions</h2>
<p>Sometimes, R will leave us wanting for custom functions. Luckily, we can define our own functions!</p>
<p>This is the general syntax for a function:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="loops.html#cb21-1" aria-hidden="true" tabindex="-1"></a>function_name <span class="ot">&lt;-</span> <span class="cf">function</span>(arguments) {</span>
<span id="cb21-2"><a href="loops.html#cb21-2" aria-hidden="true" tabindex="-1"></a>output_value <span class="ot">&lt;-</span> <span class="fu">do_something</span>(inputs)</span>
<span id="cb21-3"><a href="loops.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(output_value)</span>
<span id="cb21-4"><a href="loops.html#cb21-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Remark:</strong> every function <em>returns</em> a value. Recall from your grade-school math class that functions take an input and return an output. In R, however, a function may or may not take user-defined input.</p>
<p>This brings me to an extremely important point: <strong>creating a function does NOT run it. You must call the function to run it.</strong></p>
<p>A function is meant to be reusable‚Äîtreat it as such.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="loops.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define the function</span></span>
<span id="cb22-2"><a href="loops.html#cb22-2" aria-hidden="true" tabindex="-1"></a>calc_shrub_vol <span class="ot">&lt;-</span> <span class="cf">function</span>(length, width, height) {</span>
<span id="cb22-3"><a href="loops.html#cb22-3" aria-hidden="true" tabindex="-1"></a>  area <span class="ot">&lt;-</span> length <span class="sc">*</span> width</span>
<span id="cb22-4"><a href="loops.html#cb22-4" aria-hidden="true" tabindex="-1"></a>  volume <span class="ot">&lt;-</span> area <span class="sc">*</span> height</span>
<span id="cb22-5"><a href="loops.html#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(volume)</span>
<span id="cb22-6"><a href="loops.html#cb22-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-7"><a href="loops.html#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># call the function</span></span>
<span id="cb22-8"><a href="loops.html#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">calc_shrub_vol</span>(<span class="fl">0.8</span>, <span class="fl">1.6</span>, <span class="fl">2.0</span>)</span></code></pre></div>
<pre><code>## [1] 2.56</code></pre>
<p>As always, to save a function‚Äôs return value, you need to store the output in an appropriate data structure.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="loops.html#cb24-1" aria-hidden="true" tabindex="-1"></a>shrub_vol <span class="ot">&lt;-</span> <span class="fu">calc_shrub_vol</span>(<span class="fl">0.8</span>, <span class="fl">1.6</span>, <span class="fl">2.0</span>)</span></code></pre></div>
<p>A helpful tip is to treat functions like a black box‚Äîthe only things a function ‚Äúknows‚Äù are the inputs we pass it. Likewise, the only thing R ‚Äúknows‚Äù about a function is the output the function returns.</p>
<p>Let‚Äôs walk through <code>calc_shrub_vol()</code>‚Äôs execution (key terms are in bold):</p>
<ol style="list-style-type: decimal">
<li><strong>Call</strong> the <code>calc_shrub_vol()</code> function. Within the function,
<ol style="list-style-type: lower-alpha">
<li>Assign 0.8 to <code>length</code>, 1.6 to <code>width</code>, and 2.0 to <code>height</code> <em>inside</em> the function.</li>
<li>Calculate the area and assign it to <code>area</code>.</li>
<li>Calculate volume and assign it to <code>volume</code>.</li>
<li><strong>Return</strong> <code>volume</code> as the function output.</li>
</ol></li>
<li>Assign the function‚Äôs output to a new variable called <code>shrub_vol</code>.</li>
</ol>
<p>Since R treats functions like a black box, you can‚Äôt access a variable that was created in a function. You <strong>must</strong> save the output of a function (to a variable) to use it later.</p>
<div id="conditionals-within-functions" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Conditionals within functions</h3>
<p>Recall that we used a conditional to estimate mass differently for different types of vegetation. Since this is the kind of code we are going to want to reuse, let‚Äôs move it into a function.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="loops.html#cb25-1" aria-hidden="true" tabindex="-1"></a>est_mass <span class="ot">&lt;-</span> <span class="cf">function</span>(volume, veg_type) {</span>
<span id="cb25-2"><a href="loops.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (veg_type <span class="sc">==</span> <span class="st">&quot;tree&quot;</span>) {</span>
<span id="cb25-3"><a href="loops.html#cb25-3" aria-hidden="true" tabindex="-1"></a>    mass <span class="ot">&lt;-</span> <span class="fl">2.65</span> <span class="sc">*</span> volume<span class="sc">^</span><span class="fl">0.9</span></span>
<span id="cb25-4"><a href="loops.html#cb25-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (veg_type <span class="sc">==</span> <span class="st">&quot;grass&quot;</span>) {</span>
<span id="cb25-5"><a href="loops.html#cb25-5" aria-hidden="true" tabindex="-1"></a>    mass <span class="ot">&lt;-</span> <span class="fl">0.65</span> <span class="sc">*</span> volume<span class="sc">^</span><span class="fl">1.2</span></span>
<span id="cb25-6"><a href="loops.html#cb25-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb25-7"><a href="loops.html#cb25-7" aria-hidden="true" tabindex="-1"></a>    mass <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-8"><a href="loops.html#cb25-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb25-9"><a href="loops.html#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(mass)</span>
<span id="cb25-10"><a href="loops.html#cb25-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We can then run this function with different vegetation types and get different estimates for mass.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="loops.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">est_mass</span>(<span class="fl">1.6</span>, <span class="st">&quot;tree&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 4.045329</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="loops.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">est_mass</span>(<span class="fl">1.6</span>, <span class="st">&quot;grass&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 1.142503</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="loops.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">est_mass</span>(<span class="fl">1.6</span>, <span class="st">&quot;shrub&quot;</span>)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Let‚Äôs walk through how <code>est_mass(1.6, "shrub")</code> executes:</p>
<ol style="list-style-type: decimal">
<li>When we call <code>est_mass()</code>, the function assigns <code>1.6</code> to <code>volume</code> and <code>"shrub"</code> to <code>veg_type</code>.</li>
<li>The function checks if <code>veg_type</code> is equal to <code>"tree"</code>.</li>
<li>It isn‚Äôt, so it checks if <code>veg_type</code> is equal to <code>"grass"</code>.</li>
<li>It isn‚Äôt, so it goes to the <code>else</code> statement and executes the code in that block. Hee, the function assigns<code>NA</code> to <code>mass</code>.</li>
<li>The function exits the if/else if/else blocks and returns the value for <code>mass</code>, which is <code>NA</code>.</li>
</ol>
</div>
<div id="nested-conditionals" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Nested conditionals</h3>
<p>Occasionally, we need to make complex decisions that can‚Äôt be captured using a simple if/else if/else statement. For example, we might have different equations for some vegetation types based on the age of the plant. To solve this problem, we can ‚Äúnest‚Äù conditionals inside of one another.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="loops.html#cb32-1" aria-hidden="true" tabindex="-1"></a>est_mass <span class="ot">&lt;-</span> <span class="cf">function</span>(volume, veg_type, age) {</span>
<span id="cb32-2"><a href="loops.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (veg_type <span class="sc">==</span> <span class="st">&quot;tree&quot;</span>) {</span>
<span id="cb32-3"><a href="loops.html#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># nested condition</span></span>
<span id="cb32-4"><a href="loops.html#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (age <span class="sc">&lt;</span> <span class="dv">5</span>) {</span>
<span id="cb32-5"><a href="loops.html#cb32-5" aria-hidden="true" tabindex="-1"></a>      mass <span class="ot">&lt;-</span> <span class="fl">1.6</span> <span class="sc">*</span> volume<span class="sc">^</span><span class="fl">0.8</span></span>
<span id="cb32-6"><a href="loops.html#cb32-6" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb32-7"><a href="loops.html#cb32-7" aria-hidden="true" tabindex="-1"></a>      mass <span class="ot">&lt;-</span> <span class="fl">2.65</span> <span class="sc">*</span> volume<span class="sc">^</span><span class="fl">0.9</span></span>
<span id="cb32-8"><a href="loops.html#cb32-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb32-9"><a href="loops.html#cb32-9" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (veg_type <span class="sc">==</span> <span class="st">&quot;grass&quot;</span> <span class="sc">|</span> veg_type <span class="sc">==</span> <span class="st">&quot;shrub&quot;</span>) {</span>
<span id="cb32-10"><a href="loops.html#cb32-10" aria-hidden="true" tabindex="-1"></a>    mass <span class="ot">&lt;-</span> <span class="fl">0.65</span> <span class="sc">*</span> volume<span class="sc">^</span><span class="fl">1.2</span></span>
<span id="cb32-11"><a href="loops.html#cb32-11" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb32-12"><a href="loops.html#cb32-12" aria-hidden="true" tabindex="-1"></a>    mass <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb32-13"><a href="loops.html#cb32-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb32-14"><a href="loops.html#cb32-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(mass)</span>
<span id="cb32-15"><a href="loops.html#cb32-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="loops.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">est_mass</span>(<span class="fl">1.6</span>, <span class="st">&quot;tree&quot;</span>, <span class="at">age =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 2.330322</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="loops.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">est_mass</span>(<span class="fl">1.6</span>, <span class="st">&quot;shrub&quot;</span>, <span class="at">age =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 1.142503</code></pre>
<p>Try to minimize nested functions whenever possible as it can be difficult to read.</p>
</div>
<div id="function-arguments" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Function arguments</h3>
<p>As seen previously, we can use custom inputs by defining an input argument. As lazy programmers, we usually want to call a function without typing much. This is where <strong>default arguments</strong> come in handy. For example, many of our shrubs are the same height so for those shrubs we only measure the <code>length</code> and <code>width</code>. We can set a default value for shrub height for cases where we don‚Äôt measure it.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="loops.html#cb37-1" aria-hidden="true" tabindex="-1"></a>calc_shrub_vol <span class="ot">&lt;-</span> <span class="cf">function</span>(length, width, <span class="at">height =</span> <span class="dv">1</span>) {</span>
<span id="cb37-2"><a href="loops.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  area <span class="ot">&lt;-</span> length <span class="sc">*</span> width</span>
<span id="cb37-3"><a href="loops.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  volume <span class="ot">&lt;-</span> area <span class="sc">*</span> height</span>
<span id="cb37-4"><a href="loops.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(volume)</span>
<span id="cb37-5"><a href="loops.html#cb37-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-6"><a href="loops.html#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="loops.html#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="fu">calc_shrub_vol</span>(<span class="fl">0.8</span>, <span class="fl">1.6</span>)  <span class="co"># default argument for height</span></span></code></pre></div>
<pre><code>## [1] 1.28</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="loops.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">calc_shrub_vol</span>(<span class="fl">0.8</span>, <span class="fl">1.6</span>, <span class="fl">2.0</span>)  <span class="co"># default argument is overridden by 2,0</span></span></code></pre></div>
<pre><code>## [1] 2.56</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="loops.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">calc_shrub_vol</span>(<span class="at">length =</span> <span class="fl">0.8</span>, <span class="at">width =</span> <span class="fl">1.6</span>, <span class="at">height =</span> <span class="fl">2.0</span>)</span></code></pre></div>
<pre><code>## [1] 2.56</code></pre>
<p>As you could tell from the last two examples, you can override the default argument by providing your own value.</p>
<p>Here are some additional points:</p>
<ol style="list-style-type: decimal">
<li>You can always use names to assign a parameter to an argument.</li>
<li>If not, using names then order is determined by parameter order. For example,
<ul>
<li>First value is <code>length</code>, second value is <code>width</code>, third value is <code>height</code>.</li>
</ul></li>
<li>In many cases there are <em>a lot</em> of optional arguments. In this case, we can specify an argument by name to avoid confusion.</li>
<li>Oftentimes, only the optional arguments are specified (i.e., those without a default value).</li>
</ol>
<p>In our case, we would write:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="loops.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">calc_shrub_vol</span>(<span class="fl">0.8</span>, <span class="fl">1.6</span>, <span class="at">height =</span> <span class="fl">2.0</span>)</span></code></pre></div>
<pre><code>## [1] 2.56</code></pre>
</div>
<div id="combining-functions" class="section level3" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Combining functions</h3>
<p>Here are some guidelines for creating good functions:</p>
<ul>
<li>Each function should be single conceptual chunk of code.</li>
<li>Functions can be combined to perform larger tasks.</li>
</ul>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="loops.html#cb45-1" aria-hidden="true" tabindex="-1"></a>est_shrub_mass <span class="ot">&lt;-</span> <span class="cf">function</span>(volume) {</span>
<span id="cb45-2"><a href="loops.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  mass <span class="ot">&lt;-</span> <span class="fl">2.65</span> <span class="sc">*</span> volume<span class="sc">^</span><span class="fl">0.9</span></span>
<span id="cb45-3"><a href="loops.html#cb45-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb45-4"><a href="loops.html#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="loops.html#cb45-5" aria-hidden="true" tabindex="-1"></a>shrub_volume <span class="ot">&lt;-</span> <span class="fu">calc_shrub_vol</span>(<span class="fl">0.8</span>, <span class="fl">1.6</span>, <span class="fl">2.0</span>)</span>
<span id="cb45-6"><a href="loops.html#cb45-6" aria-hidden="true" tabindex="-1"></a>shrub_mass <span class="ot">&lt;-</span> <span class="fu">est_shrub_mass</span>(shrub_volume)</span></code></pre></div>
<p>We can nest functions. Below, the inner function executes before the outer function executes.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="loops.html#cb46-1" aria-hidden="true" tabindex="-1"></a>shrub_mass <span class="ot">&lt;-</span> <span class="fu">est_shrub_mass</span>(<span class="fu">calc_shrub_vol</span>(<span class="fl">0.8</span>, <span class="fl">1.6</span>, <span class="fl">2.0</span>))</span></code></pre></div>
<p>We need to be careful with this because nesting code can be difficult to read. As a general rule of thumb, don‚Äôt nest more than two functions.</p>
<p>We can also call functions from inside other functions. This allows us to organize function calls into logical groups.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="loops.html#cb47-1" aria-hidden="true" tabindex="-1"></a>est_shrub_mass_dim <span class="ot">&lt;-</span> <span class="cf">function</span>(length, width, height) {</span>
<span id="cb47-2"><a href="loops.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  volume <span class="ot">&lt;-</span> <span class="fu">calc_shrub_vol</span>(length, width, height)</span>
<span id="cb47-3"><a href="loops.html#cb47-3" aria-hidden="true" tabindex="-1"></a>  mass <span class="ot">&lt;-</span> <span class="fu">est_shrub_mass</span>(volume)</span>
<span id="cb47-4"><a href="loops.html#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(mass)</span>
<span id="cb47-5"><a href="loops.html#cb47-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb47-6"><a href="loops.html#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="loops.html#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="fu">est_shrub_mass_dim</span>(<span class="fl">0.8</span>, <span class="fl">1.6</span>, <span class="fl">2.0</span>)</span></code></pre></div>
<pre><code>## [1] 6.175354</code></pre>
<p>Now that we‚Äôve got the basics of R under our belts, we can jump into the fun data science applications!</p>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="data-structures.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="more-data-frames.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
